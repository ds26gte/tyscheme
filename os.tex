\chapter{System interface}
\label{os}

Useful Scheme programs often need to interact with the
underlying operating system. 

%Separate filesystem
%interface from here?  Aren’t Scheme I/O procs also
%filesystem interfacers?  Maybe I should call this the
%_non_-standard part of Scheme’s OS interface

\section{Checking for and deleting files}

\index{file!checking existence of}
\index{file!deleting}
\index{file-exists?@\q{file-exists?}}
\index{delete-file@\q{delete-file}}
\q{file-exists?} checks if its argument string names
a file.  \q{delete-file} deletes its argument file.
These procedures are not part of the Scheme standard,
but are available in most implementations.  These
procedures work reliably only for files that are not
directories.  (Their behavior on directories is
dialect-specific.) 

\index{file!time of last modification of}
\index{file-or-directory-modify-seconds@\q{file-or-directory-modify-seconds}}

\q{file-or-directory-modify-seconds} returns the time when its 
argument file or directory was last modified.  Time is
reckoned in seconds from 12 AM GMT, 1 January 1970.
E.g.,

\q{
(file-or-directory-modify-seconds "hello.scm")
|evalsto 893189629
}

\n assuming that the file \p{hello.scm} was last messed with 
sometime on 21 April 1998.

\section{Calling operating-system commands}

\index{system@\q{system}}
The \q{system} procedure executes its argument string
as an operating-system command.\f{MzScheme provides the
\q{system} procedure via the \p{process} library.  Use \q{(require
(lib "process.ss"))} to load this library.}   It returns true if the
command executed successfully with an exit status 0,
and false if it failed to execute or exited with a
non-zero status.  Any output generated by the command
goes to standard output.

\q{
(system "ls") 
;lists current directory

(define fname "spot")

(system (string-append "test -f " fname)) 
;tests if file ‘spot’ exists

(system (string-append "rm -f " fname)) 
;removes ‘spot’
}

The last two forms are equivalent to

\q{
(file-exists? fname)

(delete-file fname)
}

\section{Environment variables}

\index{getenv@\q{getenv}}
The \q{getenv} procedure returns the setting of an
operating-system environment variable.  E.g.,

\q{
(getenv "HOME")
|evalsto "/home/dorai"

(getenv "SHELL")
|evalsto "/bin/bash"
}

